{"name":"Dome fw","tagline":"Arduino C++ Firmware code for the Dome application","body":"# Telescope Dome Firmware\r\n## Scope\r\nThis is the firmware for the Arduino code used to automatically control the dome rotation of a telescope. Please note that the code is a C++ extension of the native Arduino language.\r\n\r\n## System Architecture\r\nThe system works as follow:\r\n* The Arduino board get rotations commands from a PC which has an C# application reading the telescope position and carrying out the need rotation for the Dome;\r\n* The Arduino code is organized as a command shell: it waits commands from PC and executes the command;\r\n* Arduino board controls an AC/AC converter connected to a AC electric motor that makes turning the dome is controlled in a joystick-way;\r\n* To read the dome position there is an incremental encoder on the dome gear that reports the turning (under De-multiplication);\r\n* Arduino boards takes care to allow all interfaces voltage adaptation.\r\n\r\n## Code Architecture\r\nAs mentioned above, Arduino code is made as a command shell that waits instructions from its USB port (made as CDC device) and execute them. On top of that it has an interrupt management of the encoder input and tells the angle position to the PC application.\r\n\r\n### RTOS\r\nThe code is based on the NilRTOS Real Time Operating System, and with those threads defined:\r\n* Encoder Thread: when a new pulse is read (from interrupt), incremental encoder position is converted to angle (integer so far) and it is sent to the PC via USB;\r\n* Dome Thread: used only to turn the dome for a given angle/# of encoder pulses, not working so far;\r\n* Encoder Simulation Thread: used for debug purposes, it generates a pulse to trigger the encoder thread without having the encoder hardware;\r\n* IDLE thread: it manages the USB I/O and it runs the shell code.\r\n\r\n### Implemented Commands:\r\nHere is a list of the implemented commands:\r\n\r\nGeneric:\r\n* info: it returns the FW version and the RTOS version;\r\n* help: it returns the list of the implemented commands;\r\n\r\nDome:\r\n* turn_right: it activate the AC/AC driver to turn right;\r\n* turn_left: it activate the AC/AC driver to turn left;\r\n* stop: it deactivate all AC/AC driver commands;\r\n* pos: it returns the encoder position angle as integer/angle.\r\n\r\n### Support or Contact\r\nHaving trouble with Pages? Check out the documentation at http://help.github.com/pages or contact support@github.com and weâ€™ll help you sort it out.\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}